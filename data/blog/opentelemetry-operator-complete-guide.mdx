---
title: OpenTelemetry Operator Complete Guide [OTel Collector + Auto-Instrumentation Demo]
slug: opentelemetry-operator-complete-guide
date: 2023-11-17
tags: [OpenTelemetry]
authors: [daniel]
description: An OpenTelemetry Operator is a Kubernetes Operator that manages OpenTelemetry Collectors and auto-instrumentation of workloads. Learn how to use OpenTelemetry operator to deploy OpenTelemetry Collectors and auto-instrument a sample Java application...
image: /img/blog/2023/11/opentelemetry-operator-cover.jpeg
hide_table_of_contents: false
keywords: [opentelemetry,signoz,autoinstrumentation,observability]
---

<head>
  <link rel="canonical" href="https://signoz.io/blog/opentelemetry-operator-complete-guide/"/>
</head>



Manually deploying and managing OpenTelemetry components in a Kubernetes environment can be a complex and time-consuming task. It involves creating various Kubernetes resources, setting up configurations, and ensuring the components are properly integrated with the applications.



![Cover Image](/img/blog/2023/11/opentelemetry-operator-cover.webp)

OpenTelemetry Operators provide a solution to this problem by automating the deployment, configuration, and management of OpenTelemetry components in Kubernetes clusters, making it easier for operation teams to implement observability in their applications.

In this tutorial, we will cover:

- [What is OpenTelemetry?](#what-is-opentelemetry)
- [What is a Kubernetes Operator?](#what-is-a-kubernetes-operator)
- [OpenTelemetry Operator for Kubernetes](#opentelemetry-operator-for-kubernetes)
- [Using an OpenTelemetry Operator to auto-instrument a Java application](#using-an-opentelemetry-operator-to-auto-instrument-a-java-application)
  - [Prerequisite](#prerequisite)
  - [Setting up SigNoz](#setting-up-signoz)
  - [Setting up your Java application](#setting-up-your-java-application)
  - [Setting up the OpenTelemetry Operator](#setting-up-the-opentelemetry-operator)
  - [Setup the OpenTelemetry Collector instance](#setup-the-opentelemetry-collector-instance)
- [Creating an Instrumentation Instance](#creating-an-instrumentation-instance)
  - [Auto-instrument your Java app with OpenTelemetry](#auto-instrument-your-java-app-with-opentelemetry)
- [Conclusion](#conclusion)
- [Getting started with SigNoz](#getting-started-with-signoz)
- [Further Reading](#further-reading)

## What is OpenTelemetry?

<a href = "https://opentelemetry.io" rel="noopener noreferrer nofollow" target="_blank">OpenTelemetry</a> is an open-source project under the Cloud Native Computing Foundation (<a href = "https://www.cncf.io" rel="noopener noreferrer nofollow" target="_blank">CNCF</a>) that aims to standardize the generation and collection of telemetry data. Telemetry data includes logs, metrics, and traces.

It is a collection of APIs, SDKs, and client libraries used to generate telemetry data from your application code. The data you collect with OpenTelemetry is vendor-agnostic and can be exported in many formats.

The biggest advantage of using OpenTelemetry is that you have the freedom to choose a backend of your choice. You don’t get locked into a vendor, and engineering teams can get ramped up on a single technology to generate telemetry data.

> Which backend analysis tool to choose? <br />
> You can try [SigNoz](https://signoz.io/), a full stack open-source APM built natively on OpenTelemetry.

<figure data-zoomable align='center'>
    <img src="/img/blog/2023/11/otel-signoz-arch.webp" alt="Architecture - How OpenTelemetry fits in an application architecture. OTel collector refers to OpenTelemetry Collector"/>
    <figcaption><i>Architecture - How OpenTelemetry fits in an application architecture. OTel collector refers to OpenTelemetry Collector</i></figcaption>
</figure>

## What is a Kubernetes Operator?

A Kubernetes Operator is a specialized controller or software component that automates the management of complex applications in a Kubernetes cluster through the use of <a href = "https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources" rel="noopener noreferrer nofollow" target="_blank">Custom Resource Definitions (CRDs)</a>. It extends Kubernetes functionality, allowing it to handle tasks like deploying, configuring, and managing applications, databases, and services.

Operators are especially valuable for stateful applications (applications that maintain persistent state, such as databases, caching systems, and file stores). They work by monitoring the state of the cluster and automatically taking actions to keep it in the desired state. For example, a Kubernetes Operator could monitor the status of a StatefulSet and automatically perform a rollback if an update fails. Operators can also handle complex scenarios like upgrading a database from one version to another while ensuring data consistency.

## OpenTelemetry Operator for Kubernetes

An <a href = "https://opentelemetry.io/docs/kubernetes/operator" rel="noopener noreferrer nofollow" target="_blank">OpenTelemetry Operator</a> is a Kubernetes Operator that manages [OpenTelemetry Collectors](https://signoz.io/blog/opentelemetry-collector-complete-guide/) and auto-instrumentation of workloads. It basically simplifies the deployment and management of OpenTelemetry in a Kubernetes environment.

The OpenTelemetry Operator provides two Custom Resource Definitions (CRDs):

- `OpenTelemetryCollector`
- `Instrumentation`

The `OpenTelemetryCollector` CRD allows you to deploy and manage OpenTelemetry Collectors in your Kubernetes cluster.

The `Instrumentation` CRD allows you to configure and inject OpenTelemetry auto-instrumentation libraries into your workloads.

The OpenTelemetry Operator can be used to simplify and automate the following tasks:

- Deploying and managing OpenTelemetry Collectors in a Kubernetes cluster
- Auto-instrumenting workloads with OpenTelemetry
- Configuring OpenTelemetry Collectors and Exporters
- Routing telemetry data to multiple destinations

## Using an OpenTelemetry Operator to auto-instrument a Java application

In this section, you will learn how an OpenTelemetry Operator can be set up and used in SigNoz.

### Prerequisite

- A [SigNoz](https://signoz.io/teams/) cloud account
- A Kubernetes cluster
- Java 8 or newer (full JDK not a JRE)
- A Java application

### Setting up SigNoz

You need a backend to which you can send the collected data for monitoring and visualization. [SigNoz](https://signoz.io/) is an OpenTelemetry-native APM that is well-suited for visualizing OpenTelemetry data.

SigNoz cloud is the easiest way to run SigNoz. You can sign up [here](https://signoz.io/teams/) for a free account and get 30 days of unlimited access to all features.

You can also install and self-host SigNoz yourself. Check out the [docs](https://signoz.io/docs/install/) for installing self-host SigNoz.

### Setting up your Java application

A sample Spring PetClinic Java application has been provided. To access it, run the below in your terminal:

```jsx
# Clone the Spring PetClinic repository from SigNoz's GitHub
git clone https://github.com/SigNoz/spring-petclinic

# Change into the cloned directory
cd spring-petclinic

# Use Maven Wrapper to package the Spring PetClinic application
./mvnw package

# Run the Spring PetClinic application using the generated JAR file
java -jar target/*.jar
```